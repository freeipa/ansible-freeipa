---
schedules:
- cron: "0 19 * * *"
  displayName: Nightly Builds
  branches:
    include:
    - master
  always: true

trigger: none

pool:
  vmImage: 'ubuntu-22.04'

stages:

# Fedora

- stage: FedoraLatest_Ansible_Core_2_15
  dependsOn: []
  jobs:
  - template: templates/deployment_tests.yml
    parameters:
      build_number: $(Build.BuildNumber)
      scenario: fedora-latest
      ansible_version: "-core >=2.15,<2.16"

- stage: FedoraLatest_Ansible_Core_2_16
  dependsOn: []
  jobs:
  - template: templates/deployment_tests.yml
    parameters:
      build_number: $(Build.BuildNumber)
      scenario: fedora-latest
      ansible_version: "-core >=2.16,<2.17"

#- stage: FedoraLatest_Ansible_Core_2_17
#  dependsOn: []
#  jobs:
#  - template: templates/deployment_tests.yml
#    parameters:
#      build_number: $(Build.BuildNumber)
#      scenario: fedora-latest
#      ansible_version: "-core >=2.17,<2.18"

- stage: FedoraLatest_Ansible_latest
  dependsOn: []
  jobs:
  - template: templates/deployment_tests.yml
    parameters:
      build_number: $(Build.BuildNumber)
      scenario: fedora-latest
      ansible_version: ""
